# 功能规范： [FEATURE NAME]

**功能分支**: `[###-feature-name]`  
**创建时间**: [DATE]  
**状态**: Draft  
**输入**: 用户描述："$ARGUMENTS"

## 执行流（main）
```
1. 从输入解析用户描述
   → 若为空：ERROR "No feature description provided"
2. 从描述中提取关键概念
   → 识别：角色、动作、数据、约束
3. 对每个不清楚之处：
   → 使用 [NEEDS CLARIFICATION: 具体问题] 标注
4. 填写 用户场景与测试 部分
   → 若没有清晰的用户流程：ERROR "Cannot determine user scenarios"
5. 生成 功能需求（Functional Requirements）
   → 每条需求必须可测试
   → 标出含糊的需求
6. 识别 关键实体（如涉及数据）
7. 运行 评审清单（Review Checklist）
   → 若存在 [NEEDS CLARIFICATION]：WARN "Spec has uncertainties"
   → 若发现实现细节：ERROR "Remove tech details"
8. 返回：SUCCESS（规范可用于规划）
```

---

## ⚡ 快速指引
- ✅ 聚焦用户需要做什么（WHAT）与为什么（WHY）
- ❌ 避免如何实现（HOW）（不要写技术栈、API、代码结构）
- 👥 面向业务相关方，而非开发者

### 章节要求
- **必填章节**：每个功能都必须完成
- **可选章节**：仅在相关时包含
- 当某章节不适用时，请删除该章节（不要保留 "N/A"）

### AI 生成规范时
当你基于用户提示生成本规范：
1. **标出所有歧义**：对于任何你需要假设的内容，使用 [NEEDS CLARIFICATION: 具体问题]
2. **不要猜测**：如果提示未指明（例如“登录系统”却未说明认证方式），应标注
3. **像测试人员一样思考**：任何模糊需求都应无法通过“可测试且不含糊”的检查项
4. **常见欠规范区域**：
   - 用户类型与权限
   - 数据保留/删除策略
   - 性能目标与规模
   - 错误处理行为
   - 集成需求
   - 安全/合规需求

---

## 用户场景与测试（必填）

### 主要用户故事
[以自然语言描述主用户旅程]

### 验收场景
1. **Given** [初始状态], **When** [动作], **Then** [预期结果]
2. **Given** [初始状态], **When** [动作], **Then** [预期结果]

### 边界情况
- 当 [边界条件] 时会发生什么？
- 系统如何处理 [错误场景]？

## 需求（必填）

### 功能需求（Functional Requirements）
- **FR-001**: 系统 MUST [具体能力，例如“允许用户创建账号”]
- **FR-002**: 系统 MUST [具体能力，例如“校验邮箱地址”]  
- **FR-003**: 用户 MUST 能够 [关键交互，例如“重置密码”]
- **FR-004**: 系统 MUST [数据需求，例如“持久化用户偏好设置”]
- **FR-005**: 系统 MUST [行为，例如“记录所有安全事件日志”]

*标注不清晰需求的样例：*
- **FR-006**: 系统 MUST 通过 [NEEDS CLARIFICATION: 认证方式未指定 - 邮箱/密码、SSO、OAuth？] 进行用户认证
- **FR-007**: 系统 MUST 保留用户数据 [NEEDS CLARIFICATION: 保留期限未指定]

### 关键实体（如涉及数据）
- **[Entity 1]**: [代表什么、关键属性（不包含实现）]
- **[Entity 2]**: [代表什么、与其他实体的关系]

---

## 评审与验收清单
*闸门：在 main() 执行期间进行自动检查*

### 内容质量
- [ ] 无实现细节（语言、框架、API）
- [ ] 聚焦用户价值与业务诉求
- [ ] 面向非技术相关方撰写
- [ ] 所有必填章节已完成

### 需求完整性
- [ ] 不再包含 [NEEDS CLARIFICATION]
- [ ] 需求可测试且不含糊  
- [ ] 成功标准可度量
- [ ] 范围边界清晰
- [ ] 依赖与假设已识别

---

## 执行状态
*由 main() 处理过程中更新*

- [ ] 用户描述已解析
- [ ] 关键概念已抽取
- [ ] 歧义已标注
- [ ] 用户场景已定义
- [ ] 需求已生成
- [ ] 实体已识别
- [ ] 评审清单已通过

---
